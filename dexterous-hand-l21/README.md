# L21 灵巧手控制服务

## 项目简介

这是一个用于控制 L21 灵巧手的 Web 服务程序，通过 CAN 总线实现对机械手的精确控制。该服务提供了 RESTful API 接口，支持对机械手各个关节的位置和速度进行控制。

## 系统要求

- Go 1.16 或更高版本
- CAN 总线服务（运行在 localhost:5260）
- 支持 CAN 通信的硬件设备

## 安装步骤

1. 克隆代码仓库：
```bash
git clone [仓库地址]
cd dexterous-hand-l21
```

2. 编译程序：
```bash
go build -o l21-control main.go
```

3. 运行服务：
```bash
./l21-control
```

服务将在 http://localhost:8087 启动。

## 使用方法

### 1. 启动服务

确保 CAN 总线服务（localhost:5260）已经运行，然后启动 L21 控制服务：

```bash
./l21-control
```

### 2. 访问控制界面

打开浏览器访问 http://localhost:8087 即可使用 Web 控制界面。

### 3. API 接口说明

#### 控制接口

- **URL**: `/control`
- **方法**: POST
- **Content-Type**: application/json
- **请求体格式**:
```json
{
    "command": "指令名称",
    "value": 数值或数组
}
```

#### 支持的指令

| 指令名称 | 说明 | 参数类型 | 参数范围 |
|---------|------|---------|---------|
| 大拇指旋转 | 控制大拇指旋转位置 | 单值 | 0-255 |
| 大拇指旋转速度 | 控制大拇指旋转速度 | 单值 | 0-255 |
| 横摆 | 控制所有手指横摆位置 | 5个值的数组 | 每个值 0-255 |
| 横摆速度 | 控制所有手指横摆速度 | 5个值的数组 | 每个值 0-255 |
| 手指根部 | 控制所有手指根部位置 | 5个值的数组 | 每个值 0-255 |
| 手指根部速度 | 控制所有手指根部速度 | 5个值的数组 | 每个值 0-255 |
| 大拇指2关节 | 控制大拇指第二关节位置 | 单值 | 0-255 |
| 大拇指2关节速度 | 控制大拇指第二关节速度 | 单值 | 0-255 |
| 指尖 | 控制所有手指指尖位置 | 5个值的数组 | 每个值 0-255 |
| 指尖速度 | 控制所有手指指尖速度 | 5个值的数组 | 每个值 0-255 |

#### 状态检查接口

- **URL**: `/status`
- **方法**: GET
- **返回**: 服务运行状态信息

## 参数说明

- **位置控制**：
  - 0 表示完全弯曲/最左/最内旋
  - 255 表示完全伸直/最右/最外旋

- **速度控制**：
  - 0 表示最慢
  - 255 表示最快

## 注意事项

1. 使用前请确保 CAN 总线服务正常运行
2. 所有控制参数必须在 0-255 范围内
3. 多关节控制指令（如横摆、手指根部等）需要提供正确数量的参数
4. 建议在操作前先测试各个关节的运动范围

## 故障排除

1. 如果服务无法启动，请检查：
   - CAN 总线服务是否运行（localhost:5260）
   - 端口 8087 是否被占用
   - 是否有足够的系统权限

2. 如果控制指令无响应，请检查：
   - CAN 设备是否正确连接
   - 指令参数是否在有效范围内
   - 网络连接是否正常

## 技术支持

如有问题，请提交 Issue 或联系技术支持团队。 